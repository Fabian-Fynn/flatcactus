<section data-ng-controller="HomeController" ng-init="addBgClass()">
	<div class="content-center">
			<div class="col-md-12">
				<p class="index-title text-center animated tada" data-ng-hide="authentication.user && hasWg"><strong>flatcact.us</strong></p>
				<span class="infotext animated fadeIn" data-ng-hide="authentication.user && hasWg">A nice webapp to manage your flat share.</span>

				<div class="index-links" data-ng-hide="authentication.user">
					<div class="btn" ui-route="/signup"><a class="btn btn-default btn-lg" href="/#!/signup">Sign Up</a></div>
					<div class="btn" ui-route="/signin"><a class="btn btn-default btn-lg" href="/#!/signin">Sign In</a></div>
				</div>

				<div class="index-links" data-ng-show="authentication.user && !hasWg">
					<div class="btn" ui-route="/signup" ng-class="{active: $uiRoute}"><a class="btn btn-default btn-lg" href="/#!/wgs/create">create flat-share</a></div>
					<div  class="btn" ui-route="/signup" ng-class="{active: $uiRoute}"><a class="btn btn-default btn-lg" href="/#!/wgs/join">join flat-share</a></div>
				</div>
		</div>
	</div>
	<div class="" id='dashboard' data-ng-controller="WgsController" data-ng-init="getUsers()" data-ng-if="authentication.user && hasWg">

				<div class="dash-col">
					<div class="item" id="motd">
						<h3>Messages of the day</h3>
						<div class="motd" data-ng-repeat="user in allUsers">
							<div class="user"><img ng-src="/modules/users/img/avatar.jpg" class="small-avatar" alt="profile"> </div>
							<div class="msg" ng-show="user._id != authentication.user._id " myclass={{user._id}}>{{user.motd}}</div>

							<input type="text" class="msg {{user._id}}" placeholder="Enter your message" ng-class="myclass" ng-show="user._id == authentication.user._id" ng-model="user.motd"
							ng-change="editMotd(user)"
							></input>

							<div class="notice" ng-show="user._id == authentication.user._id" ng-bind-html="motdStatus"></div>
							<br>
						</div>
					</div>
					<div class="item" id="tasks" data-ng-controller="XtasklistsController" data-ng-init="findFromWg()">
						<h3>Continuous Tasks</h3>
						<div data-ng-repeat="xtasklist in tasks">
							<p>
								{{xtasklist.name}}
								<img ng-src="/modules/users/img/avatar.jpg" class="small-avatar" alt="profile">
								{{xtasklist.current.username}}
							</p>

						</div>
					</div>
				</div>
				<div class="dash-col">
					<div class="item" id="todo" data-ng-controller="TodosController" data-ng-init="getAll()">
						<h3>Todo list</h3>
		        <div class="controls">
		            <input type="text" data-ng-model="name" id="name" class="msg" placeholder="New Todo" ng-keypress="($event.which === 13)?create(true):0" required>
		            <button class="btn btn-xs edit" id="create" ng-click="create(true)">Add</button>
		        </div>
						<div class="container">
							<div class="todo-items" ng-hide="">
					      <span data-ng-repeat="todo in todos track by $index" ng-class="{'todo-order': !todo.isDone, 'todo-order-done': todo.isDone}">
					        <input class="todo-input" id="{{'item' + $index}}" type="checkbox" ng-checked="todo.isDone" ng-click="setToDone($index, todo)">
					        <label class="todo-label" for="{{'item' + $index}}">{{todo.name}} <i ng-show="todo.isDone" class="todo-done_small"> done by <strong>{{todo.done_by}}</strong> {{todo.done_when | date:"dd.MM.yyyy (H:mm)"}}</i></label>
					      </span>

					      <h2 class="todo-h2 todo-undone" aria-hidden="true">Not Done</h2>
					      <h2 class="todo-h2 todo-done" aria-hidden="true">Done</h2>
					    </div>
						</div>
					</div>
					<div class="item" id="shopping">
						<h3>Shopping list</h3>
					</div>
				</div>
				<div class="dash-col">
					<div class="item" id="weather">
				    <h4>Weather in {{wg.city}}, {{wg.country}}</h4>
						<div class="temps">
					    <h5>{{ weather.temp.current | temp:2 }}</h5>
							<br>
							<p>
						    {{ weather.temp.min | temp }} <br> {{ weather.temp.max | temp }}
							</p>
						</div>
						<div class="icon">
							<weather-icon cloudiness="{{ weather.clouds }}"></weather-icon>
						</div>

					</div>
					<div class="item" id="clock">
						<div class="wrapper">
							<ds-widget-clock class="clock-hour" theme="dark" show-digital="true" digital-format="'hh'"></ds-widget-clock>
							<span class="time large">: </span>
							<ds-widget-clock class="clock-minutes" theme="dark" show-digital="true" digital-format="'mm a'"></ds-widget-clock>
							<p class="weekday">{{weekday}}</p>
							<p class="date">{{date}}</p>
						</div>
					</div>

					<div class="item" id="financial" ng-controller="BarCtrl" data-ng-init="getUsers()">
						<h3>Financial overview</h3>
						<canvas id="bar" class="chart chart-bar" data="data" labels="labels"></canvas>
					</div>
				</div>
	</div>
</section>
